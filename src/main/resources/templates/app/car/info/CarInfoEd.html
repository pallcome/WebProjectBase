<th:block layout:decorate="~{${layoutName}}">
<!-- 페이지 content(ui) -->
<main layout:fragment="pageContent" class="content">
	<div class="container-fluid p-0">
		<!-- s : 내용 시작 -->
		<div class="row align-items-center content-head">
			<div class="col-md-6">
				<h2 class="h1 mb-0 col-md-auto">자동차 정보 등록</h2>
			</div>
			<div class="col-md-6">
				<nav style="--bs-breadcrumb-divider: '>';" aria-label="breadcrumb">
					<ol class="breadcrumb mb-0 justify-content-end">
						<li class="breadcrumb-item" aria-current="page"><i class="fas fa-home me-1"></i>홈</li>
						<li class="breadcrumb-item" aria-current="page">자동차 정보</li>
						<li class="breadcrumb-item" aria-current="page">자동차 정보 등록</li>
					</ol>
				</nav>
			</div>
		</div>
		<div class="row">
			<!-- s : 왼쪽 -->
			<div class="col-md-6">
				<!-- s : card -->
				<div class="card">
					<div class="card-body">
						<!-- s : subtitle-wrap -->
						<div class="subtitle-wrap row">
							<div class="col-md-6">
								<h3 class="card-title">자동차 정보 목록</h3>
							</div>
							<div class="col-md-6">
								<div class="text-sm-end">
									<button id="btnSearch" class="btn btn-secondary"><i class="fas fa-search me-2"></i>검색</button>
									<button class="btn btn-outline-primary accordion-button" data-bs-toggle="collapse" data-bs-target="#collapseOne" aria-expanded="true">
									  <i class="fa-solid fa-plus me-2"></i>상세필터
									  <span class="coll-txt">펼치기</span>
									</button>
								</div>
							</div>
						</div>
						<!-- e : subtitle-wrap -->
						<!-- s : sub-box -->
						<div class="sub-box">
							<form id="searchForm">
								<div class="table-form">
									<table class="table table-bordered align-middle">
										<colgroup>
											<col width="120">
											<col width="*">
											<col width="120">
											<col width="*">
										</colgroup>
										<tbody>
											<tr>
				                                <th>
				                                    <label class="col-form-label">시험년도</label>
				                                </th>
				                                <td>
				                                	<div class="row gx-2 align-items-center">
						                                <div class="col-sm-auto">
						                                    <div class="calendar-item">
						                                        <label for="TEST_START_YR"><i class="fa-solid fa-calendar-days"></i></label>
						                                        <input type="text" id="TEST_START_YR" name="TEST_START_YR" class="calendar-input">
						                                    </div>
						                                </div>
						                                <div class="col-sm-auto">~</div>
						                                <div class="col-sm-auto">
						                                    <div class="calendar-item">
						                                        <label for="TEST_END_YR"><i class="fa-solid fa-calendar-days"></i></label>
						                                        <input type="text" id="TEST_END_YR" name="TEST_END_YR" class="calendar-input">
						                                    </div>
						                                </div>
						                            </div>
				                                </td>
				                                <th>
				                                    <label for="MNFTR_YR" class="col-form-label">제조년도</label>
				                                </th>
				                                <td>
				                                    <div class="row gx-2 align-items-center">
						                                <div class="col-sm-auto">
						                                    <div class="calendar-item">
						                                        <label for="MNFTR_START_YR"><i class="fa-solid fa-calendar-days"></i></label>
						                                        <input type="text" id="MNFTR_START_YR" name="MNFTR_START_YR" class="calendar-input">
						                                    </div>
						                                </div>
						                                <div class="col-sm-auto">~</div>
						                                <div class="col-sm-auto">
						                                    <div class="calendar-item">
						                                        <label for="MNFTR_END_YR"><i class="fa-solid fa-calendar-days"></i></label>
						                                        <input type="text" id="MNFTR_END_YR" name="MNFTR_END_YR" class="calendar-input">
						                                    </div>
						                                </div>
						                            </div>
				                                </td>
				                            </tr>
											<tr>
				                                <th>
				                                	<label for="SEARCH_MKR_CD" class="col-form-label">제조사</label>
				                                </th>
				                                <td colspan="3">
				                                    <select id="SEARCH_MKR_CD" name="SEARCH_MKR_CD" class="form-select">
				                                        <option value="" >전체</option>
				                                        <option th:each="item : ${carMakerList}" th:value="${item.MKR_CD}" th:text="${item.MKR_NM}" th:attr="data-img=${item.ULD_FILE_NM} != null ? @{/file/image(path=${item.ULD_FILE_NM + '.' + item.FILE_EXTN_NM})} : null"></option>
				                                    </select>
				                                </td>
				                            </tr>
											<tr>
				                                <th>
				                                	<label for="SC_CAR_MDL_NM" class="col-form-label">모델명</label>
				                                </th>
				                                <td colspan="3">
				                                    <input type="text" id="SC_CAR_MDL_NM" name="SC_CAR_MDL_NM" class="form-control">
				                                </td>
				                            </tr>
										</tbody>
									</table>
								</div>
								<div id="collapseOne" class="accordion-collapse collapse" aria-labelledby="headingOne" data-bs-parent="#accordionExample">
                               		<div class="accordion-body">
	                               		<div class="table-form">
											<table class="table table-bordered align-middle">
												<colgroup>
													<col width="120">
													<col width="*">
													<col width="120">
													<col width="*">
												</colgroup>
												<tbody>
													<tr>
			                               				<th>
			                               					<div class="form-check form-check-inline">
				                                				<input class="form-check-input" type="checkbox" name="SC_CARMDL_1N_CD" id="SC_CARMDL_1N_CD" value="ALL" checked="checked"/>
			                                                	<label class="form-check-label all-label" for="SC_CARMDL_1N_CD">차종분류1</label>
			                                               	</div>
			                               				</th>
			                               				<td colspan="3">
			                                                <th:block th:each="item, state : ${carN1KindList}">
																<div th:with="fieldName='SC_CARMDL_1N_CD'" class="form-check form-check-inline">
																	<input th:name="${fieldName}" th:id="${fieldName + state.index}" th:value="${item.CARMDL_CD}" th:validLabel="${fieldName}" class="form-check-input" type="checkbox" checked>
																	<label th:for="${fieldName + state.index}" th:text="${item.CARMDL_CLSF_NM}" class="form-check-label"></label>
																</div>
															</th:block>
			                               				</td>
			                               			</tr>
			                               			<tr>
			                               				<th>
				                                            <div class="form-check form-check-inline">
				                                                <input class="form-check-input" type="checkbox" name="SC_CARMDL_2N_CD" id="SC_CARMDL_2N_CD" value="ALL" checked="checked"/>
				                                                <label class="form-check-label all-label" for="SC_CARMDL_2N_CD">차종분류2</label>
				                                            </div>
			                               				</th>
			                               				<td colspan="3">
					                                        <th:block th:each="item, state : ${carN2KindList}">
																<div th:with="fieldName='SC_CARMDL_2N_CD'" class="form-check form-check-inline">
																	<input th:name="${fieldName}" th:id="${fieldName + state.index}" th:value="${item.CARMDL_CD}" th:validLabel="${fieldName}" class="form-check-input" type="checkbox" checked>
																	<label th:for="${fieldName + state.index}" th:text="${item.CARMDL_CLSF_NM}" class="form-check-label"></label>
																</div>
															</th:block>
			                               				</td>
			                               			</tr>
			                               			<tr>
				                               			<th>
				                                            <div class="form-check form-check-inline">
				                                                <input class="form-check-input" type="checkbox" name="SC_FUEL_CD" id="SC_FUEL_CD" value="ALL" checked="checked"/>
				                                                <label class="form-check-label all-label" for="SC_FUEL_CD">연료</label>
				                                            </div>
				                               			</th>
				                               			<td colspan="3">
					                                        <th:block th:each="item, state : ${carFuelList}">
																<div th:with="fieldName='SC_FUEL_CD'" class="form-check form-check-inline">
																	<input th:name="${fieldName}" th:id="${fieldName + state.index}" th:value="${item.FUEL_CD}" th:validLabel="${fieldName}" class="form-check-input" type="checkbox" checked>
																	<label th:for="${fieldName + state.index}" th:text="${item.FUEL_NM}" class="form-check-label"></label>
																</div>
															</th:block>
				                               			</td>
			                               			</tr>
			                               			<tr>
			                               				<th>
			                               					<div class="form-check form-check-inline">
				                                                <input class="form-check-input" type="checkbox" name="SC_TRSM_CD" id="SC_TRSM_CD" value="ALL" checked="checked"/>
				                                                <label class="form-check-label all-label" for="SC_TRSM_CD">변속기분류</label>
				                                            </div>
			                               				</th>
			                               				<td colspan="3">
			                               					<th:block th:each="item, state : ${carTransList}">
																<div th:with="fieldName='SC_TRSM_CD'" class="form-check form-check-inline">
																	<input th:name="${fieldName}" th:id="${fieldName + state.index}" th:value="${item.TRSM_CD}" th:validLabel="${fieldName}" class="form-check-input" type="checkbox" checked>
																	<label th:for="${fieldName + state.index}" th:text="${item.TRSM_NM}" class="form-check-label"></label>
																</div>
															</th:block>
			                               				</td>
			                               			</tr>
												</tbody>
											</table>
										</div>
                               		</div>
                               	</div>
							</form>
							<article class="alert-box">
								<div class="alert-title"><i class="fas fa-exclamation-circle me-2"></i>안내사항</div>
								<ul class="alert-list">
									<li>평가정보나 연결된 정보가 존재하는 경우 <strong>삭제 불가</strong></li>
                                    <li>데이터 편집 후 저장시 검색 조건 설정이 유지된 상태로 재조회되므로 검색조건 확인 필요</li>
								</ul>
							</article>
							<!-- s : data-table-wrap -->
							<div class="data-table-wrap">
								<table id="MODEL_LIST" class="table table-striped w-100 nowrap"></table>
							</div>
							<!-- e : data-table-wrap -->
						</div>
						<!-- e : sub-box -->
					</div>
				</div>
				<!-- e : card -->
			</div>
			<!-- e : 왼쪽 -->
			<!-- s : 오른쪽 -->
			<div class="col-md-6">
		        <div class="card">
		            <div class="card-body">
		                <div class="subtitle-wrap row">
		                    <div class="col-md-6">
		                        <h3 class="card-title">자동차 모델</h3>
		                    </div>
		                    <div class="col-md-6">
		                        <div class="text-sm-end">
		                        	<button id="btnNew" class="btn btn-outline-primary"><i class="fa-solid fa-plus me-2"></i>신규</button>
		                            <button id="btnSave" class="btn btn-primary"><i class="fas fa-save me-2"></i>저장</button>
		                            <button id="btnCopy" class="btn btn-outline-primary "><i class="fas fa-clone me-2"></i>복사</button>
		                            <button id="btnDelete" class="btn btn-outline-primary"><i class="fa-solid fa-trash me-2"></i>삭제</button>
		                        </div>
		                    </div>
		                </div>
		                <div class="table-form">
		                	<form id="myForm">
			                    <table class="table table-bordered align-middle">
			                        <colgroup>
			                            <col width="110">
			                            <col width="*">
			                            <col width="110">
			                            <col width="*">
			                        </colgroup>
			                        <tbody>
			                            <tr>
			                                <th>
			                                    <label for="MKR_CD" class="col-form-label required">제조사</label>
			                                </th>
			                                <td colspan="3">
			                                    <select id="MKR_CD" name="MKR_CD" class="form-select" required="required">
			                                      <option value="" >선택</option>
			                                      <th:block th:each="item : ${carMakerList}">
			                                        <option th:if="${item.USE_YN == 'Y'}" th:value="${item.MKR_CD}" th:text="${item.MKR_NM}" th:attr="data-img=${item.ULD_FILE_NM} != null ? @{/file/image(path=${item.ULD_FILE_NM + '.' + item.FILE_EXTN_NM})} : null"></option>
			                                      </th:block>
			                                    </select>
			                                    <!-- TODO Validate -->
			                                    <p id="validChk" style="display:none;" class="text-danger mb-0 mt-2">※ 동일한 모델이 존재합니다.</p>
			                                </td>
			                            </tr>
			                            <tr>
			                                <th>
			                                    <label for="TEST_YR" class="col-form-label required">시험년도</label>
			                                </th>
			                                <td>
			                                	<div class="calendar-item">
				                                	<label for="TEST_YR"><i class="fa-solid fa-calendar-days"></i></label>
				                                    <input type="text" id="TEST_YR" name="TEST_YR" class="calendar-input" required="required">
			                                    </div>
			                                </td>
			                                <th>
			                                    <label for="MNFTR_YR" class="col-form-label">제조년도</label>
			                                </th>
			                                <td>
			                                    <div class="calendar-item">
				                                	<label for="MNFTR_YR"><i class="fa-solid fa-calendar-days"></i></label>
				                                    <input type="text" id="MNFTR_YR" name="MNFTR_YR" class="calendar-input">
			                                    </div>
			                                </td>
			                            </tr>
			                            <tr>
			                                <th>
			                                    <label for="CAR_MDL_NM" class="col-form-label required">모델명</label>
			                                </th>
			                                <td colspan="3">
			                                    <input type="text" id="CAR_MDL_NM" name="CAR_MDL_NM" class="form-control" required="required">
			                                </td>
			                            </tr>
			                            <tr>
			                                <th>
			                                    <label for="CAR_MDL_ENG_NM" class="col-form-label">모델 영문명</label>
			                                </th>
			                                <td colspan="3">
			                                    <input type="text" id="CAR_MDL_ENG_NM" name="CAR_MDL_ENG_NM" class="form-control">
			                                </td>
			                            </tr>
			                            <tr>
			                                <th>
			                                    <label class="col-form-label required" for="CARMDL_1N_CD">차종분류1</label>
			                                </th>
			                                <td colspan="3">
	                                        <th:block th:each="item, state : ${carN1KindList}">
												<div th:with="fieldName='CARMDL_1N_CD'" class="form-check form-check-inline">
													<input th:name="${fieldName}" th:id="${fieldName + state.index}" th:value="${item.CARMDL_CD}" th:validLabel="${fieldName}" class="form-check-input" type="radio"  required="required">
													<label th:for="${fieldName + state.index}" th:text="${item.CARMDL_CLSF_NM}" class="form-check-label"></label>
												</div>
											</th:block>
			                                </td>
			                            </tr>
			                            <tr>
			                                <th>
			                                    <label class="col-form-label" for="CARMDL_2N_CD">차종분류2</label>
			                                </th>
			                                <td colspan="3">
			                                    <th:block th:each="item, state : ${carN2KindList}">
												<div th:with="fieldName='CARMDL_2N_CD'" class="form-check form-check-inline">
													<input th:name="${fieldName}" th:id="${fieldName + state.index}" th:value="${item.CARMDL_CD}" th:validLabel="${fieldName}" class="form-check-input" type="radio">
													<label th:for="${fieldName + state.index}" th:text="${item.CARMDL_CLSF_NM}" class="form-check-label"></label>
												</div>
											</th:block>
			                                </td>
			                            </tr>
			                            <tr>
			                                <th>
			                                    <label class="col-form-label required" for="FUEL_CD">연료</label>
			                                </th>
			                                <td colspan="3">
			                                    <th:block th:each="item, state : ${carFuelList}">
												<div th:if="${item.USE_YN == 'Y'}" th:with="fieldName='FUEL_CD'" class="form-check form-check-inline">
													<input th:name="${fieldName}" th:id="${fieldName + state.index}" th:value="${item.FUEL_CD}" th:validLabel="${fieldName}" class="form-check-input" type="radio" required="required">
													<label th:for="${fieldName + state.index}" th:text="${item.FUEL_NM}" class="form-check-label"></label>
												</div>
											</th:block>
			                                </td>
			                            </tr>
			                            <tr>
			                                <th>
			                                    <label class="col-form-label required" for="TRSM_CD">변속기</label>
			                                </th>
			                                <td colspan="3">
			                                    <th:block th:each="item, state : ${carTransList}">
												<div th:if="${item.USE_YN == 'Y'}" th:with="fieldName='TRSM_CD'" class="form-check form-check-inline">
													<input th:name="${fieldName}" th:id="${fieldName + state.index}" th:value="${item.TRSM_CD}" th:validLabel="${fieldName}" class="form-check-input" type="radio" required="required">
													<label th:for="${fieldName + state.index}" th:text="${item.TRSM_NM}" class="form-check-label"></label>
												</div>
												</th:block>
			                                    <input type="text" id="TRSM_TXT_NM" name="TRSM_TXT_NM" class="form-control d-inline-block w-auto" value="">
			                                </td>
			                            </tr>
			                            <tr>
			                                <th>
			                                    <label class="col-form-label required" for="uploadBox">차량이미지</label>
			                                    <i class="fas fa-question-circle tooltips" data-bs-toggle="tooltip" data-bs-placement="bottom" data-bs-html="true" title="※ 로고사이즈 000 X000 이미지 파일만 적용가능<br>
			                                    ※ 로고 없이 저장시 기본 로고 이미지 표시됨"></i>
			                                </th>
			                                <td colspan="3">
			                                    <div class="upload-box" id="uploadBox">
			                                        <label for="carImageInput" class="upload-placeholder">
			                                            <div class="upload-icon"><i class="fas fa-file-upload"></i></div>
			                                            <p class="placehold-txt">이 곳을 클릭하여 파일을 업로드 하세요.</p>
			                                            <p class="text-danger mb-0 ">※ 차량 이미지 사이즈는 가로 000 X 세로 000 이미지 파일 만 등록 가능(문구 추후 변경)</p>
			                                        </label>
			                                    </div>
			                                    <div class="uploaded-info" id="uploadInfo" style="display:none; position: relative;">
													<div class="image-wrapper">
														<img class="imagePreview" src="" alt="이미지 미리보기" />
														<button type="button" class="delete-btn btnDeleteImage"><i class="fas fa-trash-alt"></i></button>
													</div>
													<div>
														<p class="fileName"></p>
														<p class="fileSize"></p>
													</div>
												</div>
			                                </td>
			                            </tr>
			                            <tr>
			                                <th>
			                                    <label class="col-form-label">최종수정일</label>
			                                </th>
			                                <td><input type="text" id="MDFCN_DT" name="MDFCN_DT" class="form-control readonly" readonly></td>
			                                <th>
			                                    <label class="col-form-label">최종수정자</label>
			                                </th>
			                                <td><input type="text" id="MDFCN_USER_NM" name="MDFCN_USER_NM" class="form-control readonly" readonly></td>
			                            </tr>
			                        </tbody>
			                    </table>
		                	</form>
		                </div>
		            </div>
		        </div>
		    </div>
			<!-- e : 오른쪽 -->
		</div>

		<!-- e : 내용 끝 -->
	</div>
</main>
<!-- 페이지 script -->
<th:block layout:fragment="pageScript">
	<script th:inline="javascript">
	const myapp = (function() {
		let myapp = {};
		
		<!--/************ Form 설정 ************/-->
		Common.datepicker($("#TEST_START_YR"), {
			view : "years"
		});
		Common.datepicker($("#TEST_END_YR"), {
			view : "years"
		});
		Common.datepicker($("#MNFTR_START_YR"), {
			view : "years"
		});
		Common.datepicker($("#MNFTR_END_YR"), {
			view : "years"
		});
		Common.datepicker($("#TEST_YR"), {
			view : "years"
		});
		Common.datepicker($("#MNFTR_YR"), {
			view : "years"
		});
		Common.datepickerRange($("#TEST_START_YR"), $("#TEST_END_YR"));
		Common.datepickerRange($("#MNFTR_START_YR"), $("#MNFTR_END_YR"));
		
		$("#SEARCH_MKR_CD, #MKR_CD").select2({
			templateResult : Common.select2ViewImage
			, templateSelection : Common.select2ViewImage
		});
		
		<!--/* checkbox 이벤트 */-->
		$(":checkbox[name='SC_CARMDL_1N_CD'], :checkbox[name='SC_CARMDL_2N_CD'], :checkbox[name='SC_FUEL_CD'], :checkbox[name='SC_TRSM_CD']").change(function(e) {
			const value = $(this).val();
			const name = $(this).attr("name");
			if(value == "ALL") { <!--/* 전체선택 */-->
				$(`:checkbox[name='${name}']`).prop("checked", $(this).is(":checked"))
			}else {
				const cnt = $(`:checkbox[name='${name}']:not(#${name})`).length;
				const checkedCnt = $(`:checkbox[name='${name}']:not(#${name}):checked`).length;
				$(`:checkbox#${name}`).prop("checked", cnt == checkedCnt);
			}
		});
		
		<!--/* keyUp/change validation */-->
		$('#MKR_CD, #TEST_YR, #CAR_MDL_NM').on('change',function(e){
			myapp.changeValidtion();
		})
		let datepickerInstance = document.querySelector('#TEST_YR').datepicker;
		datepickerInstance.update({
		    onSelect({date, formattedDate, datepicker}) {
		    	myapp.changeValidtion();
			}
		});
		
		<!--/* 조회 설정 */-->
		myapp.setView = function(viewType) {
			if(viewType == "NEW") {
				$("#btnDelete, #btnCopy").prop("disabled", true);
				$("#btnSave, #myForm :disabled").prop("disabled", false);
				Common.clearFormData("myForm");
				
			}else if(viewType == "EDIT") {
				$("#btnSave, #btnDelete, #btnCopy, #myForm :input:disabled").prop("disabled", false);
			}else if(viewType == "COPY"){
				$("#btnDelete, #btnNew").prop("disabled", true);
				$("#btnSave, #myForm :disabled").prop("disabled", false);
			}else {
				$("#btnSave, #btnDelete, #btnCopy, #myForm :input:not([readonly])").prop("disabled", true);
				Common.clearFormData("myForm");
			}
		}
		
		<!--/* 목록 조회 */-->
		myapp.search = function(data) {
			DataTable.init({
				targetId : "MODEL_LIST"
				, url : /*[[@{/car/info/edit/selectList}]]*/
				, data : $("#searchForm").serializeObject()
				, columns : [
					{data : "MKR_NM", title : "제조사", className : "text-start"}
					, {data : "TEST_YR", title : "시험년도", className : "text-start"}
					, {data : "CAR_MDL_NM", title : "모델명", className : "text-start cell-select"}
					, {data : "CARMDL_1N_NM", title : "차종분류1", className : "text-start"}
					, {data : "CARMDL_2N_NM", title : "차종분류2", className : "text-start"}
					, {data : "FUEL_NM", title : "연료", className : "text-start"}
					, {data : "MNFTR_YR", title : "제조년도", className : "text-start"}
					, {data : "TRSM_NM", title : "변속기분류", className : "text-start"}
				]
				, visibleRowNo : true
				, select : "single"
				, buttons : [
					{
						type : "excel"
						, fileName : "자동차정보 목록"
					}
				]
				, initCallback : function(result, settings) {
					if(Common.isEmpty(data) == false) {
						myapp.searchInfo(data);
					}else if(Common.isEmpty(result.data[0]) == false) {
						myapp.searchInfo(result.data[0]);
					}else{
						myapp.searchInfo();
					}
				}
				, cellClick : function(rowData, row) {
					myapp.searchInfo(rowData);
				}
			});
		}
		myapp.search();
		
		myapp.searchInfo = function(data){
			if(data){
				myapp.setView("EDIT");
			}else{
				myapp.setView();
			}
			Common.ajax({
				url : /*[[@{/car/info/edit/selectInfo}]]*/
				, data : data
				, callback : function(result, textStatus, jqXHR) {
					let obj = {};
					if(result["ATCH_FILE_CD"]){
						$.extend(obj, {ORGNL_FILE_NM : {
							uploadInfoId : "uploadInfo"
								, uploadBoxId : "uploadBox"
							}}
						);
					}
					Common.setFormData("myForm", result, obj);
				}
			});
		}
		
		<!--/* 삭제 */-->
		myapp.delete = function(list) {
			Common.ajax({
				url : /*[[@{/car/info/edit/delete}]]*/
				, toast : "delete"
				, data : {list : list}
				, callback : function(result, textStatus, jqXHR) {
					myapp.search();
				}
			});
		}
		
		<!--/* 검색 버튼 클릭 이벤트 */-->
		$("#btnSearch").on("click", function() {
			myapp.search();
		});
		<!--/* input 엔터 이벤트 */-->
		$("#searchForm :input").keypress(function(e) {
			if(e.keyCode == 13) {
				myapp.search();
			}
		});
		<!--/* 저장 버튼 클릭 이벤트 */-->
		$("#btnSave").on("click", function() {
			let formValid = Common.valid($("#myForm"),'자동차 모델', [
				{
					rules : function() {
						const result = {valid : true};
						const src = $("#uploadInfo .imagePreview").attr("src");
						if(Common.isEmpty(src)) {
							result.valid = false;
							result["element"] = $("#uploadBox");
							result["method"] = "required";
						}
						
						return result;
					}
				}
			]);
			
			if(!formValid.valid) {
				Common.showValidDialog([formValid]);
				return;
			}
			
			Common.ajax({
				url : /*[[@{/car/info/edit/save}]]*/
				, toast : "save"
				, data : $("#myForm").serializeObject()
				, callback : function(result, textStatus, jqXHR) {
					myapp.search(result);
				}
			});
		});

		<!--/* 신규 버튼 클릭 이벤트 */-->
		$("#btnNew").on("click", function() {
			myapp.setView("NEW");
		});
		<!--/* 삭제 버튼 클릭 이벤트 */-->
		$("#btnDelete").on("click", function() {
			myapp.delete([$("#myForm").serializeObject()]);
		});
		<!--/* 복사 버튼 */-->
		$("#btnCopy").on("click", function() {
			myapp.setView("COPY");
			$('input[name=CAR_MDL_CD]').val('');
			$('input[name=CAR_MDL_NM]').val('');
			$('input[name=CAR_MDL_ENG_NM]').val('');
			$('.btnDeleteImage').click();
			$('input[name=ATCH_FILE_CD]').val('');
			$('input[name=ORGNL_ULD_FILE_NM]').val('');
		});
		
		<!--/* 이미지 업로드 */-->
		$("#uploadBox").click(function() {
			Common.fileUpload({
				callback : function(file) {
					Common.viewImage({
						uploadInfoId : "uploadInfo"
						, uploadBoxId : "uploadBox"
						, file : file
					});
				}
				, accept : "image/*"
				, thumb : {
					width : 300
					, height : 300
				}
			});
		});
		
		myapp.changeValidtion = function(){
			let mkrVal = $('#MKR_CD').val();
			let yrVal = $('#TEST_YR').val();
			let nmVal = $('#CAR_MDL_NM').val();
			
			if(!Common.isEmpty(mkrVal) && !Common.isEmpty(yrVal) && !Common.isEmpty(nmVal)){
				Common.ajax({
					url : /*[[@{/car/info/edit/valid}]]*/
					, data : $("#myForm").serializeObject()
					, callback : function(result, textStatus, jqXHR) {
						if(result.EXIST_YN === 'Y'){
							$('#validChk').show();
						}else{
							$('#validChk').hide();
						}
					}
				});	
			}else{
				$('#validChk').hide();
			}
		}
		
		<!--/************ window 함수 선언 ************/-->
		$(window).resize(function() {
			DataTable.dataTableResize(); <!--/* DataTables resize */-->
		});
		
		return myapp;
	}());
	</script>
</th:block>
</th:block>