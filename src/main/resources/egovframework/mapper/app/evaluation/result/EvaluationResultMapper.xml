<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE mapper PUBLIC "-//mybatis.org//DTD Mapper 3.0//EN" "http://mybatis.org/dtd/mybatis-3-mapper.dtd">
<mapper namespace="EvaluationResultMapper">
	<!-- 시험년도 목록 조회 -->
	<select id="selectTestYearList" parameterType="map" resultType="map">
          SELECT DISTINCT TEST_YR
            FROM TN_CAR_MODEL
           ORDER BY TEST_YR DESC
	</select>
	<!-- 목록 조회 -->
	<select id="selectList" parameterType="map" resultType="map">
        SELECT A1.CAR_MDL_CD
               , A1.TEST_YR
               , A2.MKR_NM
               , A1.CAR_MDL_NM
               , A3.CARMDL_CLSF_NM AS CARMDL_1N_NM
               , A4.CARMDL_CLSF_NM AS CARMDL_2N_NM
               , A5.FUEL_NM
               , A1.MNFTR_YR
               , A6.TRSM_NM
               , A1.TEST_RSLT_RLS_YN
               , A9.TEST_GRD AS TOT_TEST_GRD
               , A7.TEST_RSLT_SCR AS TOT_TEST_RSLT_SCR
               , A12.TEST_GRD GHG_TEST_GRD
               , A10.TEST_RSLT_SCR AS GHG_TEST_RSLT_SCR
               , A15.TEST_GRD AS LCA_TEST_GRD
               , A13.TEST_RSLT_SCR AS LCA_TEST_RSLT_SCR
               , A18.TEST_GRD AS AIR_TEST_GRD
               , A16.TEST_RSLT_SCR AS AIR_TEST_RSLT_SCR
               , IF(A7.TEST_RSLT_SCR IS NOT NULL, '평가', '') AS TEST_RESULT_YN
          FROM TN_CAR_MODEL A1
         INNER JOIN TN_CAR_MAKER A2
            ON A1.MKR_CD = A2.MKR_CD
         INNER JOIN TN_CAR_KIND A3
            ON A1.CARMDL_1N_CD = A3.CARMDL_CD
           AND A3.CLSF_SE_CD = '1'
          LEFT JOIN TN_CAR_KIND A4
            ON A1.CARMDL_2N_CD = A4.CARMDL_CD
           AND A4.CLSF_SE_CD = '2'
         INNER JOIN TN_CAR_FUEL A5
            ON A1.FUEL_CD = A5.FUEL_CD
         INNER JOIN TN_CAR_TRSM A6
            ON A1.TRSM_CD = A6.TRSM_CD
          LEFT JOIN TN_CAR_TEST_RSLT A7
            ON A1.CAR_MDL_CD = A7.CAR_MDL_CD
           AND A7.TEST_ARTCL_CD = 'TOT'
          LEFT JOIN TN_CAR_TEST_PRD A8
            ON A8.TEST_ARTCL_CD = 'TOT'
           AND A1.TEST_YR BETWEEN A8.APLCN_BGNG_YR AND A8.APLCN_END_YR
          LEFT JOIN TN_CAR_TEST_SCOR A9
            ON A8.TEST_ARTCL_PRD_CD = A9.TEST_ARTCL_PRD_CD
           AND A7.TEST_RSLT_SCR BETWEEN A9.MIN_SCR AND A9.MAX_SCR
          LEFT JOIN TN_CAR_TEST_RSLT A10
            ON A1.CAR_MDL_CD = A10.CAR_MDL_CD
           AND A10.TEST_ARTCL_CD = 'GHG'
          LEFT JOIN TN_CAR_TEST_PRD A11
            ON A11.TEST_ARTCL_CD = 'GHG'
           AND A1.TEST_YR BETWEEN A11.APLCN_BGNG_YR AND A11.APLCN_END_YR
          LEFT JOIN TN_CAR_TEST_SCOR A12
            ON A11.TEST_ARTCL_PRD_CD = A12.TEST_ARTCL_PRD_CD
           AND A10.TEST_RSLT_SCR BETWEEN A12.MIN_SCR AND A12.MAX_SCR
          LEFT JOIN TN_CAR_TEST_RSLT A13
            ON A1.CAR_MDL_CD = A13.CAR_MDL_CD
           AND A13.TEST_ARTCL_CD = 'LCA'
          LEFT JOIN TN_CAR_TEST_PRD A14
            ON A14.TEST_ARTCL_CD = 'LCA'
           AND A1.TEST_YR BETWEEN A14.APLCN_BGNG_YR AND A14.APLCN_END_YR
          LEFT JOIN TN_CAR_TEST_SCOR A15
            ON A14.TEST_ARTCL_PRD_CD = A15.TEST_ARTCL_PRD_CD
           AND A13.TEST_RSLT_SCR BETWEEN A15.MIN_SCR AND A15.MAX_SCR
          LEFT JOIN TN_CAR_TEST_RSLT A16
            ON A1.CAR_MDL_CD = A16.CAR_MDL_CD
           AND A16.TEST_ARTCL_CD = 'AIR'
          LEFT JOIN TN_CAR_TEST_PRD A17
            ON A17.TEST_ARTCL_CD = 'AIR'
           AND A1.TEST_YR BETWEEN A17.APLCN_BGNG_YR AND A17.APLCN_END_YR
          LEFT JOIN TN_CAR_TEST_SCOR A18
            ON A17.TEST_ARTCL_PRD_CD = A18.TEST_ARTCL_PRD_CD
           AND A16.TEST_RSLT_SCR BETWEEN A18.MIN_SCR AND A18.MAX_SCR
         WHERE A1.TEST_YR = #{TEST_YR} 
       <if test='TEST_RESULT_YN != null and TEST_RESULT_YN.size > 0'>
           <foreach open = "AND IF(A7.TEST_RSLT_SCR IS NOT NULL, 'Y', 'N') IN (" close=")" collection="TEST_RESULT_YN" item="item" separator=",">#{item}</foreach>
       </if>
       <if test='MNFTR_START_YR != null and MNFTR_START_YR != ""'>
           AND A1.MNFTR_YR >= #{MNFTR_START_YR}
       </if>
       <if test='MNFTR_END_YR != null and MNFTR_END_YR != ""'>
           AND A1.MNFTR_YR <![CDATA[<=]]> #{MNFTR_END_YR}
       </if>
       <if test='MKR_CD != null and MKR_CD != ""'>
           AND A1.MKR_CD = #{MKR_CD}
       </if>
       <if test='CAR_MDL_NM != null and CAR_MDL_NM != ""'>
           AND INSTR(UPPER(A1.CAR_MDL_NM), UPPER(#{CAR_MDL_NM})) > 0
       </if>
       <if test='TEST_RSLT_RLS_YN != null and TEST_RSLT_RLS_YN.size > 0'>
           <foreach open = "AND IF(A1.TEST_RSLT_RLS_YN IS NOT NULL, 'Y', 'N') IN (" close=")" collection="TEST_RSLT_RLS_YN" item="item" separator=",">#{item}</foreach>
       </if>
       <if test='CARMDL_1N_CD != null and CARMDL_1N_CD.size > 0'>
           <foreach open = "AND A1.CARMDL_1N_CD IN (" close=")" collection="CARMDL_1N_CD" item="item" separator=",">#{item}</foreach>
       </if>
       <if test='CARMDL_2N_CD != null and CARMDL_2N_CD.size > 0'>
           <foreach open = "AND A1.CARMDL_2N_CD IN (" close=")" collection="CARMDL_2N_CD" item="item" separator=",">#{item}</foreach>
       </if>
       <if test='FUEL_CD != null and FUEL_CD.size > 0'>
           <foreach open = "AND A1.FUEL_CD IN (" close=")" collection="FUEL_CD" item="item" separator=",">#{item}</foreach>
       </if>
       <if test='TRSM_CD != null and TRSM_CD.size > 0'>
           <foreach open = "AND A1.TRSM_CD IN (" close=")" collection="TRSM_CD" item="item" separator=",">#{item}</foreach>
       </if>
	</select>
	<!-- 자동차 정보 조회 -->
	<select id="selectCarInfo" parameterType="map" resultType="map">
        SELECT A1.CAR_MDL_CD
               , A1.CAR_MDL_NM
               , CONCAT(A1.MNFTR_YR, '년') AS MNFTR_YR
               , IFNULL(A1.TEST_RSLT_RLS_YN, 'N') AS TEST_RSLT_RLS_YN
               , IF(A1.ATCH_FILE_CD IS NOT NULL, CONCAT(A2.ULD_FILE_NM, '.', A2.FILE_EXTN_NM), '') AS CAR_IMAGE
               , IF(A3.ATCH_FILE_CD IS NOT NULL, CONCAT(A4.ULD_FILE_NM, '.', A4.FILE_EXTN_NM), '') AS MKR_IMAGE
          FROM TN_CAR_MODEL A1
          LEFT JOIN CM_ATCH_FILE A2
            ON A1.ATCH_FILE_CD = A2.ATCH_FILE_CD
         INNER JOIN TN_CAR_MAKER A3
            ON A1.MKR_CD = A3.MKR_CD
          LEFT JOIN CM_ATCH_FILE A4
            ON A3.ATCH_FILE_CD = A4.ATCH_FILE_CD
         WHERE A1.CAR_MDL_CD = #{CAR_MDL_CD}
	</select>
	<!-- 종합정보 조회 -->
	<select id="selectTotInfo" parameterType="map" resultType="map">
        SELECT A1.CAR_MDL_CD
               , 'TOT' AS TEST_ARTCL_CD
               , A7.TEST_ARTCL_PRD_CD
               , A1.TEST_YR
               , A2.MKR_NM
               , CONCAT(A1.CAR_MDL_NM, IF(A1.CAR_MDL_ENG_NM IS NOT NULL, CONCAT(' (', A1.CAR_MDL_ENG_NM, ')'), '')) AS CAR_MDL_NM
               , A3.CARMDL_CLSF_NM AS CARMDL_1N_NM
               , A4.CARMDL_CLSF_NM AS CARMDL_2N_NM
               , CONCAT(A5.FUEL_NM, IF(A5.FUEL_ABBR IS NOT NULL, CONCAT(' (', A5.FUEL_ABBR, ')'), '')) AS FUEL_NM
               , CONCAT(A1.MNFTR_YR, '년') AS MNFTR_YR
               , CONCAT(A6.TRSM_NM, IF(A6.TRSM_ABBR IS NOT NULL, CONCAT(' (', A6.TRSM_ABBR, ')'), '')) AS TRSM_NM
               , A8.TEST_RSLT_SCR
               , IF(A9.ATCH_FILE_CD IS NOT NULL, CONCAT(A10.ULD_FILE_NM, '.', A10.FILE_EXTN_NM), '') AS IMAGE
               , (SELECT CONCAT(MIN(Z1.MIN_SCR), ' ~ ', MAX(Z1.MAX_SCR))
                    FROM TN_CAR_TEST_SCOR Z1
                   WHERE A7.TEST_ARTCL_PRD_CD = Z1.TEST_ARTCL_PRD_CD
                ) AS SCR_RANGE
               , A7.DRCT_INPT_YN
               , A7.INDIV_YN
               , (CASE A7.INDIV_YN
                   WHEN 'Y'
                   THEN (SELECT GROUP_CONCAT(Z1.MAX_SCR ORDER BY Z1.MAX_SCR)
                           FROM TN_CAR_TEST_SCOR Z1
                          WHERE A7.TEST_ARTCL_PRD_CD = Z1.TEST_ARTCL_PRD_CD)
               END) AS SCR_INPUT
          FROM TN_CAR_MODEL A1
         INNER JOIN TN_CAR_MAKER A2
            ON A1.MKR_CD = A2.MKR_CD
         INNER JOIN TN_CAR_KIND A3
            ON A1.CARMDL_1N_CD = A3.CARMDL_CD
           AND A3.CLSF_SE_CD = '1'
          LEFT JOIN TN_CAR_KIND A4
            ON A1.CARMDL_2N_CD = A4.CARMDL_CD
           AND A4.CLSF_SE_CD = '2'
         INNER JOIN TN_CAR_FUEL A5
            ON A1.FUEL_CD = A5.FUEL_CD
         INNER JOIN TN_CAR_TRSM A6
            ON A1.TRSM_CD = A6.TRSM_CD
          LEFT JOIN TN_CAR_TEST_PRD A7
            ON A7.TEST_ARTCL_CD = 'TOT'
           AND A1.TEST_YR BETWEEN A7.APLCN_BGNG_YR AND A7.APLCN_END_YR
          LEFT JOIN TN_CAR_TEST_RSLT A8
            ON A8.TEST_ARTCL_CD = 'TOT'
           AND A1.CAR_MDL_CD = A8.CAR_MDL_CD
          LEFT JOIN TN_CAR_TEST A9
            ON A9.TEST_ARTCL_CD = 'TOT'
          LEFT JOIN CM_ATCH_FILE A10
            ON A9.ATCH_FILE_CD = A10.ATCH_FILE_CD
         WHERE A1.CAR_MDL_CD = #{CAR_MDL_CD}
	</select>
	<!-- 정보 조회(간략)  -->
	<select id="selectInfo" parameterType="map" resultType="map">
        SELECT A1.CAR_MDL_CD
               , A1.TEST_YR
               , #{TEST_ARTCL_CD} AS TEST_ARTCL_CD
               , A5.TEST_ARTCL_PRD_CD
               , A2.TEST_RSLT_SCR
               , A2.NOTREE
               , IF(A1.ATCH_FILE_CD IS NOT NULL, CONCAT(A4.ULD_FILE_NM, '.', A4.FILE_EXTN_NM), '') AS IMAGE
               , (SELECT CONCAT(MIN(Z1.MIN_SCR), ' ~ ', MAX(Z1.MAX_SCR))
                    FROM TN_CAR_TEST_SCOR Z1
                   WHERE A5.TEST_ARTCL_PRD_CD = Z1.TEST_ARTCL_PRD_CD
                ) AS SCR_RANGE
               , A5.DRCT_INPT_YN
               , A5.INDIV_YN
               , (CASE A5.INDIV_YN
                   WHEN 'Y'
                   THEN (SELECT GROUP_CONCAT(Z1.MAX_SCR ORDER BY Z1.MAX_SCR)
                           FROM TN_CAR_TEST_SCOR Z1
                          WHERE A5.TEST_ARTCL_PRD_CD = Z1.TEST_ARTCL_PRD_CD)
               END) AS SCR_INPUT
          FROM TN_CAR_MODEL A1
          LEFT JOIN TN_CAR_TEST_RSLT A2
            ON A1.CAR_MDL_CD = A2.CAR_MDL_CD
           AND A2.TEST_ARTCL_CD = #{TEST_ARTCL_CD}
          LEFT JOIN TN_CAR_TEST A3
            ON A3.TEST_ARTCL_CD = #{TEST_ARTCL_CD}
          LEFT JOIN CM_ATCH_FILE A4
            ON A3.ATCH_FILE_CD = A4.ATCH_FILE_CD
          LEFT JOIN TN_CAR_TEST_PRD A5
            ON A5.TEST_ARTCL_CD = #{TEST_ARTCL_CD}
           AND A1.TEST_YR BETWEEN A5.APLCN_BGNG_YR AND A5.APLCN_END_YR
         WHERE A1.CAR_MDL_CD = #{CAR_MDL_CD}
	</select>
	<!-- 항목별 평가 결과 목록 조회 -->
	<select id="selectResultScoreList" parameterType="map" resultType="map">
         SELECT A1.TEST_ARTCL_CD
                , #{CAR_MDL_CD} AS CAR_MDL_CD
                , #{TEST_YR} AS TEST_YR
                , A2.TEST_ARTCL_PRD_CD
                , A1.TEST_ARTCL_NM
                , A4.UNIT_NM
                , A2.DRCT_INPT_YN
                , A3.TEST_RSLT_SCR
                , (SELECT CONCAT(MIN(Z1.MIN_SCR), ' ~ ', MAX(Z1.MAX_SCR))
                     FROM TN_CAR_TEST_SCOR Z1
                    WHERE A2.TEST_ARTCL_PRD_CD = Z1.TEST_ARTCL_PRD_CD
                ) AS SCR_RANGE
                , A2.INDIV_YN
               , (CASE A2.INDIV_YN
                   WHEN 'Y'
                   THEN (SELECT GROUP_CONCAT(Z1.MAX_SCR ORDER BY Z1.MAX_SCR)
                           FROM TN_CAR_TEST_SCOR Z1
                          WHERE A2.TEST_ARTCL_PRD_CD = Z1.TEST_ARTCL_PRD_CD)
               END) AS SCR_INPUT
           FROM TN_CAR_TEST A1
     INNER JOIN TN_CAR_TEST_PRD A2
             ON A1.TEST_ARTCL_CD = A2.TEST_ARTCL_CD
            AND #{TEST_YR} BETWEEN A2.APLCN_BGNG_YR AND A2.APLCN_END_YR
      LEFT JOIN TN_CAR_TEST_RSLT A3
             ON A1.TEST_ARTCL_CD = A3.TEST_ARTCL_CD
            AND A3.CAR_MDL_CD = #{CAR_MDL_CD}
      LEFT JOIN CM_UNIT A4
             ON A1.UNIT_CD = A4.UNIT_CD
          WHERE A1.UP_TEST_ARTCL_CD = #{TEST_ARTCL_CD}
       ORDER BY ISNULL(A1.SORT_SEQ), A1.SORT_SEQ
	</select>
	<!-- 배점 기준 목록 조회 -->
	<select id="selectTestScoreList" parameterType="map" resultType="map">
         SELECT A1.DRCT_INPT_YN
                , A1.INDIV_YN
                , A2.TEST_GRD
                , A2.MIN_SCR
                , A2.MAX_SCR
                , A2.MAX_SCR AS SINGLE_SCR
                , A2.SCR_EXPLN
                , A2.SORT_SEQ
           FROM TN_CAR_TEST_PRD A1
           LEFT JOIN TN_CAR_TEST_SCOR A2
             ON A1.TEST_ARTCL_PRD_CD = A2.TEST_ARTCL_PRD_CD
          WHERE A1.TEST_ARTCL_CD = #{TEST_ARTCL_CD}
            AND #{TEST_YR} BETWEEN A1.APLCN_BGNG_YR AND A1.APLCN_END_YR
            AND A1.TEST_ARTCL_PRD_CD = #{TEST_ARTCL_PRD_CD}
          ORDER BY ISNULL(A2.SORT_SEQ), A2.SORT_SEQ
	</select>
	<!-- 자동차 결과여부 저장 -->
	<update id="updateCarRlsYn" parameterType="map">
        UPDATE TN_CAR_MODEL
           SET TEST_RSLT_RLS_YN = #{TEST_RSLT_RLS_YN}
         WHERE CAR_MDL_CD = #{CAR_MDL_CD}
	</update>
	<!-- 자동차시험결과 저장 -->
	<insert id="mergeResult" parameterType="map">
        INSERT INTO TN_CAR_TEST_RSLT (
               CAR_MDL_CD
               , TEST_ARTCL_CD
               , TEST_RSLT_SCR
               , NOTREE
               , REG_USER_CD
               , REG_USER_IP
               , REG_DT
               , MDFCN_USER_CD
               , MDFCN_USER_IP
               , MDFCN_DT
        )
        VALUES (
               #{CAR_MDL_CD}
               , #{TEST_ARTCL_CD}
               , #{TEST_RSLT_SCR}
               , #{NOTREE}
               , #{SESSION_USER_CD}
               , #{SESSION_USER_IP}
               , NOW()
               , #{SESSION_USER_CD}
               , #{SESSION_USER_IP}
               , NOW()
        )
        ON DUPLICATE KEY UPDATE
           TEST_RSLT_SCR = #{TEST_RSLT_SCR}
         , NOTREE = #{NOTREE}
         , MDFCN_USER_CD = #{SESSION_USER_CD}
         , MDFCN_USER_IP = #{SESSION_USER_IP}
         , MDFCN_DT = NOW()
	</insert>
	
	
	
	<!-- 자동차 그룹 목록 조회 -->
	<select id="selectCarGroupList" parameterType="map" resultType="map">
        SELECT CAR_MDL_GROUP_CD
               , CAR_MDL_GROUP_NM
          FROM TN_CAR_MODEL_GROUP
         ORDER BY CAR_MDL_GROUP_NM
	</select>
	<!-- 매핑차량 목록 조회 -->
	<select id="selectMappingList" parameterType="map" resultType="map">
        SELECT A1.CAR_MDL_CD
               , A1.TEST_YR
               , A2.MKR_NM
               , A1.CAR_MDL_NM
               , A3.CARMDL_CLSF_NM AS CARMDL_1N_NM
               , A4.CARMDL_CLSF_NM AS CARMDL_2N_NM
               , A5.FUEL_NM
               , A1.MNFTR_YR
               , A6.TRSM_NM
               , A1.TEST_RSLT_RLS_YN
               , IF(A7.TEST_RSLT_SCR IS NOT NULL, '평가', '') AS TEST_RESULT_YN
               , A8.CAR_MDL_GROUP_CD
               , A8.RPRS_YN
               , A9.CAR_MDL_GROUP_NM
          FROM TN_CAR_MODEL A1
         INNER JOIN TN_CAR_MAKER A2
            ON A1.MKR_CD = A2.MKR_CD
         INNER JOIN TN_CAR_KIND A3
            ON A1.CARMDL_1N_CD = A3.CARMDL_CD
           AND A3.CLSF_SE_CD = '1'
          LEFT JOIN TN_CAR_KIND A4
            ON A1.CARMDL_2N_CD = A4.CARMDL_CD
           AND A4.CLSF_SE_CD = '2'
         INNER JOIN TN_CAR_FUEL A5
            ON A1.FUEL_CD = A5.FUEL_CD
         INNER JOIN TN_CAR_TRSM A6
            ON A1.TRSM_CD = A6.TRSM_CD
          LEFT JOIN TN_CAR_TEST_RSLT A7
            ON A1.CAR_MDL_CD = A7.CAR_MDL_CD
           AND A7.TEST_ARTCL_CD = 'TOT'
         INNER JOIN TN_CAR_MODEL_MPNG A8
            ON A1.CAR_MDL_CD = A8.CAR_MDL_CD
           AND A8.CAR_MDL_GROUP_CD = #{CAR_MDL_GROUP_CD}
         INNER JOIN TN_CAR_MODEL_GROUP A9
            ON A8.CAR_MDL_GROUP_CD = A9.CAR_MDL_GROUP_CD
         WHERE A1.TEST_YR = #{TEST_YR}
       <if test='RPRS_YN != null and RPRS_YN.size > 0'>
           <foreach open = "AND A8.RPRS_YN IN (" close=")" collection="RPRS_YN" item="item" separator=",">#{item}</foreach>
       </if>
       <if test='TEST_RESULT_YN != null and TEST_RESULT_YN.size > 0'>
           <foreach open = "AND IF(A7.TEST_RSLT_SCR IS NOT NULL, 'Y', 'N') IN (" close=")" collection="TEST_RESULT_YN" item="item" separator=",">#{item}</foreach>
       </if>
       <if test='MNFTR_START_YR != null and MNFTR_START_YR != ""'>
           AND A1.MNFTR_YR >= #{MNFTR_START_YR}
       </if>
       <if test='MNFTR_END_YR != null and MNFTR_END_YR != ""'>
           AND A1.MNFTR_YR <![CDATA[<=]]> #{MNFTR_END_YR}
       </if>
       <if test='MKR_CD != null and MKR_CD != ""'>
           AND A1.MKR_CD = #{MKR_CD}
       </if>
       <if test='CAR_MDL_NM != null and CAR_MDL_NM != ""'>
           AND INSTR(UPPER(A1.CAR_MDL_NM), UPPER(#{CAR_MDL_NM})) > 0
       </if>
       <if test='TEST_RSLT_RLS_YN != null and TEST_RSLT_RLS_YN.size > 0'>
           <foreach open = "AND IF(A1.TEST_RSLT_RLS_YN IS NOT NULL, 'Y', 'N') IN (" close=")" collection="TEST_RSLT_RLS_YN" item="item" separator=",">#{item}</foreach>
       </if>
       <if test='CARMDL_1N_CD != null and CARMDL_1N_CD.size > 0'>
           <foreach open = "AND A1.CARMDL_1N_CD IN (" close=")" collection="CARMDL_1N_CD" item="item" separator=",">#{item}</foreach>
       </if>
       <if test='CARMDL_2N_CD != null and CARMDL_2N_CD.size > 0'>
           <foreach open = "AND A1.CARMDL_2N_CD IN (" close=")" collection="CARMDL_2N_CD" item="item" separator=",">#{item}</foreach>
       </if>
       <if test='FUEL_CD != null and FUEL_CD.size > 0'>
           <foreach open = "AND A1.FUEL_CD IN (" close=")" collection="FUEL_CD" item="item" separator=",">#{item}</foreach>
       </if>
       <if test='TRSM_CD != null and TRSM_CD.size > 0'>
           <foreach open = "AND A1.TRSM_CD IN (" close=")" collection="TRSM_CD" item="item" separator=",">#{item}</foreach>
       </if>
	</select>
</mapper>